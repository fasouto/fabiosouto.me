---
import DefaultLayout from '@layouts/DefaultLayout.astro'
import { getCollection } from 'astro:content'

const articles = await getCollection('articles', ({ data }) => !data.draft)
const sortedArticles = articles.sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
---

<DefaultLayout title="Articles">
  <section class="articles my-24">
    <div class="container">
      <header class="articles-header">
        <h1>Articles</h1>
      </header>
      <ul class="article-list">
        {sortedArticles.map((article) => (
          <li class="article-item">
            <a href={`/articles/${article.id}`}>
              <h2 class="article-title">{article.data.title}</h2>
              {article.data.subtitle && (
                <p class="article-subtitle">{article.data.subtitle}</p>
              )}
            </a>
          </li>
        ))}
      </ul>
      <p class="rss-link">
        <a href="/rss.xml">Subscribe via RSS</a>
      </p>
    </div>
  </section>
</DefaultLayout>

<style>
  .articles-header {
    text-align: center;
    margin-bottom: 4rem;
  }

  .articles-header h1 {
    font-family: 'Inter', sans-serif;
    font-size: clamp(2.5rem, 6vw, 3.5rem);
    font-weight: 900;
    letter-spacing: -1px;
    color: #1a1a1a;
    margin: 0;
  }

  .article-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 3rem;
  }

  .article-item {
    text-align: center;
  }

  .article-item a {
    text-decoration: none;
    display: block;
  }

  .article-title {
    font-family: 'Inter', sans-serif;
    font-size: clamp(1.5rem, 4vw, 2.25rem);
    font-weight: 600;
    color: #1a1a1a;
    margin: 0 0 0.25rem 0;
  }

  .article-subtitle {
    font-family: 'Caveat', cursive;
    font-size: clamp(1.4rem, 3vw, 1.8rem);
    font-weight: 400;
    color: #b85c38;
    margin: 0;
    transform: rotate(-1deg);
    display: inline-block;
  }

  .article-item a:hover .article-title {
    color: #b85c38;
  }

  .rss-link {
    text-align: center;
    margin-top: 4rem;
  }

  .rss-link a {
    font-family: 'Inter', sans-serif;
    font-size: 0.9rem;
    color: #888;
    text-decoration: none;
  }

  .rss-link a:hover {
    color: #b85c38;
  }
</style>
